port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: 127.0.0.1:9090

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  # é€™è£¡æ”¹ç”¨ DoHï¼Œé˜²åŠ«æŒä¸”æ›´ç©©å®š
  nameserver:
    - https://8.8.8.8/dns-query
    - https://1.1.1.1/dns-query
    - https://223.5.5.5/dns-query

proxies: []

proxy-groups:
  - name: ğŸš€ ç¯€é»é¸æ“‡
    type: select
    proxies:
      - âš¡ è‡ªå‹•é¸æ“‡
      - DIRECT

  - name: âš¡ è‡ªå‹•é¸æ“‡
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    proxies: []

  - name: ğŸ’¬ AI æœå‹™
    type: select
    proxies:
      - âš¡ è‡ªå‹•é¸æ“‡
      - ğŸš€ ç¯€é»é¸æ“‡

  - name: ğŸŒ éä¸­åœ‹
    type: select
    proxies:
      - ğŸš€ ç¯€é»é¸æ“‡

  - name: ğŸ”’ åœ‹å…§æœå‹™
    type: select
    proxies:
      - DIRECT
      - ğŸš€ ç¯€é»é¸æ“‡

  - name: ğŸ  ç§æœ‰ç¶²çµ¡
    type: select
    proxies:
      - DIRECT

  - name: ğŸŸ æ¼ç¶²ä¹‹é­š
    type: select
    proxies:
      - ğŸš€ ç¯€é»é¸æ“‡

  - name: ğŸ›‘ å»£å‘Šæ””æˆª
    type: select
    proxies:
      - REJECT
      - DIRECT

rule-providers:
  my-ai:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/sammy0101/myself/raw/refs/heads/main/geosite_ai_hk_proxy.mrs"
    path: ./ruleset/my-ai.mrs
    interval: 86400

  meta-non-cn:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-!cn.mrs"
    path: ./ruleset/non-cn.mrs
    interval: 86400

  meta-cn:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-cn.mrs"
    path: ./ruleset/cn.mrs
    interval: 86400

  meta-ads:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ads-all.mrs"
    path: ./ruleset/ads.mrs
    interval: 86400

  meta-private:
    type: http
    behavior: domain
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/private.mrs"
    path: ./ruleset/private.mrs
    interval: 86400

  meta-ip-cn:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.mrs"
    path: ./ruleset/ip-cn.mrs
    interval: 86400

  meta-ip-private:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/private.mrs"
    path: ./ruleset/ip-private.mrs
    interval: 86400

rules:
  # 1. æœ€å„ªå…ˆï¼šæ””æˆªèˆ‡å…§ç¶² (åŸŸåé¡)
  - RULE-SET,meta-ads,ğŸ›‘ å»£å‘Šæ””æˆª
  - RULE-SET,meta-private,ğŸ  ç§æœ‰ç¶²çµ¡

  # 2. æ ¸å¿ƒæ¥­å‹™ï¼šAI (åŸŸåé¡)
  # æ”¾åœ¨é€™è£¡ç¢ºä¿å„ªå…ˆæ¬Šæœ€é«˜ï¼Œä¸å— CN/Non-CN è¦å‰‡å¹²æ“¾
  - RULE-SET,my-ai,ğŸ’¬ AI æœå‹™

  # 3. åœ°å€åˆ†æµ (åŸŸåé¡ - Domain Rule)
  # å…ˆåŒ¹é…åŸŸåï¼Œé¿å…ä¸å¿…è¦çš„ DNS è§£æ
  - RULE-SET,meta-cn,ğŸ”’ åœ‹å…§æœå‹™
  - RULE-SET,meta-non-cn,ğŸŒ éä¸­åœ‹

  # 4. å…œåº•åˆ†æµ (IP é¡ - IP Rule)
  # ä¸Šé¢åŸŸåéƒ½æ²’åŒ¹é…åˆ°ï¼Œé€™è£¡æ‰é–‹å§‹è§£æ IP é€²è¡Œåˆ¤æ–·
  - RULE-SET,meta-ip-private,ğŸ  ç§æœ‰ç¶²çµ¡
  - RULE-SET,meta-ip-cn,ğŸ”’ åœ‹å…§æœå‹™
  - GEOIP,CN,ğŸ”’ åœ‹å…§æœå‹™

  # 5. æœ€çµ‚å…œåº•
  - MATCH,ğŸŸ æ¼ç¶²ä¹‹é­š

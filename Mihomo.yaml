port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: :9090

dns:
  enable: true
  listen: 0.0.0.0:53
  ipv6: false
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  fallback:
    - https://8.8.8.8/dns-query
    - https://1.1.1.1/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

proxies:

proxy-groups:
  # ğŸš€ ä¸»æ‰‹å‹•é¸æ“‡çµ„ï¼šåŒ…å«è‡ªå‹•é¸æ“‡ã€ç›´é€£ã€ä»¥åŠæ‰€æœ‰ç¯€é»
  - name: ğŸš€ ç¯€é»é¸æ“‡
    type: select
    proxies:
      - âš¡ è‡ªå‹•é¸æ“‡
      - DIRECT
    # Sub-Store æœƒè‡ªå‹•æŠŠæ‰€æœ‰ç¯€é»å¡«å…¥é€™è£¡ï¼Œå› ç‚ºé€™è£¡æœ‰ filter
    filter: ".*"

  # âš¡ è‡ªå‹•æ¸¬é€Ÿçµ„ï¼šåŒ…å«æ‰€æœ‰ç¯€é»ï¼Œè‡ªå‹•é¸å»¶é²æœ€ä½çš„
  - name: âš¡ è‡ªå‹•é¸æ“‡
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: ".*"

  # --- ä»¥ä¸‹ç‚ºåŠŸèƒ½åˆ†æµçµ„ ---

  - name: ğŸ’¬ AI æœå‹™
    type: select
    proxies:
      - ğŸš€ ç¯€é»é¸æ“‡
      - âš¡ è‡ªå‹•é¸æ“‡
      - DIRECT
      - REJECT

  - name: ğŸŒ éä¸­åœ‹
    type: select
    proxies:
      - ğŸš€ ç¯€é»é¸æ“‡
      - âš¡ è‡ªå‹•é¸æ“‡
      - DIRECT
      - REJECT

  - name: ğŸ”’ åœ‹å…§æœå‹™
    type: select
    proxies:
      - DIRECT
      - ğŸš€ ç¯€é»é¸æ“‡
      - âš¡ è‡ªå‹•é¸æ“‡
      - REJECT

  - name: ğŸ  ç§äººç¶²è·¯
    type: select
    proxies:
      - DIRECT
      - ğŸš€ ç¯€é»é¸æ“‡
      - REJECT

  - name: ğŸ›‘ å»£å‘Šæ””æˆª
    type: select
    proxies:
      - REJECT
      - DIRECT
      - ğŸš€ ç¯€é»é¸æ“‡

  - name: ğŸŸ æ¼ç¶²ä¹‹é­š
    type: select
    proxies:
      - ğŸš€ ç¯€é»é¸æ“‡
      - âš¡ è‡ªå‹•é¸æ“‡
      - DIRECT
      - REJECT

rule-providers:
  ai:
    type: http
    behavior: domain
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-!cn.list"
    path: ./ruleset/category-ai.yaml
    interval: 86400

  non_cn:
    type: http
    behavior: domain
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-!cn.list"
    path: ./ruleset/non_cn.yaml
    interval: 86400

  cn_site:
    type: http
    behavior: domain
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-cn.list"
    path: ./ruleset/cn_site.yaml
    interval: 86400

  cn_ip:
    type: http
    behavior: ipcidr
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.list"
    path: ./ruleset/cn_ip.yaml
    interval: 86400

  private_ip:
    type: http
    behavior: ipcidr
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/private.list"
    path: ./ruleset/private_ip.yaml
    interval: 86400

  private_site:
    type: http
    behavior: domain
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/private.list"
    path: ./ruleset/private_site.yaml
    interval: 86400

  ads:
    type: http
    behavior: domain
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ads-all.list"
    path: ./ruleset/ads.yaml
    interval: 86400

rules:
  - RULE-SET,ads,ğŸ›‘ å»£å‘Šæ””æˆª
  - RULE-SET,private_site,ğŸ  ç§äººç¶²è·¯
  - RULE-SET,private_ip,ğŸ  ç§äººç¶²è·¯
  - RULE-SET,ai,ğŸ’¬ AI æœå‹™
  - RULE-SET,non_cn,ğŸŒ éä¸­åœ‹
  - RULE-SET,cn_site,ğŸ”’ åœ‹å…§æœå‹™
  - RULE-SET,cn_ip,ğŸ”’ åœ‹å…§æœå‹™
  - MATCH,ğŸŸ æ¼ç¶²ä¹‹é­š
